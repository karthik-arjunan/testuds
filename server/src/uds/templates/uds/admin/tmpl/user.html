{% load i18n %}
{% verbatim %}
<form class="form-horizontal" role="form">
      <input type="hidden" name="id" value="{{ id }}" class="modal_field_data">
      
      <div class="form-group">
        <label for="id_username" class="col-sm-2 control-label">{{ username_label }}</label>
        <div class="col-sm-10">
          {{# if canSearchUsers }}
          {{# if id }}
          {{ else }}
          <div class="input-group">
          {{/ if }}
          {{/ if }}
              <input name="name" value="{{ username }}" type="text" id="id_username" class="form-control modal_field_data" 
                     placeholder="{% endverbatim %}{% trans 'Username' %}{% verbatim %}"{{# if username }}readonly{{/ if }}>
          {{# if canSearchUsers }}
          {{# if id }}
          {{ else }}
              <span class="input-group-btn">
                <button class="btn btn-info button-search" type="button"><i class="fa fa-search"></i> {% endverbatim %}{% trans 'Search' %}{% verbatim %}</button>
              </span>
          </div>
          {{/ if }}
          {{/ if }}
        </div>
      </div>
      <div class="form-group">
        <label for="id_realname" class="col-sm-2 control-label">{% endverbatim %}{% trans 'Name' %}{% verbatim %}</label>
        <div class="col-sm-10">
          <input name="real_name" value="{{ realname }}" type="text" id="id_realname" class="form-control modal_field_data" 
                 placeholder="{% endverbatim %}{% trans 'Name' %}{% verbatim %}">
        </div>
      </div>
    
      <div class="form-group">
        <label for="id_comments" class="col-sm-2 control-label">{% endverbatim %}{% trans 'comments' %}{% verbatim %}</label>
        <div class="col-sm-10">
          <input name="comments" value="{{ comments }}" type="text" id="id_comments" class="form-control modal_field_data" 
                 placeholder="{% endverbatim %}{% trans 'Comments' %}{% verbatim %}">
        </div>
      </div>
    
      <div class="form-group">
        <label for="id_state" class="col-sm-2 control-label">{% endverbatim %}{% trans 'State' %}{% verbatim %}</label>
        <div class="col-sm-10">
          <select name="state" class="selectpicker show-menu-arrow show-tick modal_field_data" data-style="btn-default" data-width="100%" id="id_state">
            <option value="A"{{# ifequals state 'A'}} selected{{/ ifequals }}>{% endverbatim %}{% trans 'Enabled' %}{% verbatim %}</option>
            <option value="I"{{# ifequals state 'I'}} selected{{/ ifequals }}>{% endverbatim %}{% trans 'Disabled' %}{% verbatim %}</option>
            <option value="B"{{# ifequals state 'B'}} selected{{/ ifequals }}>{% endverbatim %}{% trans 'Blocked' %}{% verbatim %}</option>
          </select>
        </div>
      </div>
    
      <div class="form-group">
        <label for="id_staffmember" class="col-sm-2 control-label">{% endverbatim %}{% trans 'Staff member' %}{% verbatim %}</label>
        <div class="col-sm-10">
            <div class="make-switch">
                <input type="checkbox"
                  data-on-text="{% endverbatim %}{% trans 'Yes' %}{% verbatim %}" 
                  data-off-text="{% endverbatim %}{% trans 'No' %}{% verbatim %}"
                  class="modal_field_data" name="staff_member" id="id_staffmember"{{# if staff_member }} checked{{/ if }}>
            </div>
        </div>
      </div>
    
      <div class="form-group">
        <label for="id_admin" class="col-sm-2 control-label">{% endverbatim %}{% trans 'Admin' %}{% verbatim %}</label>
        <div class="col-sm-10">
            <div class="make-switch">
                <input type="checkbox"
                  data-on-text="{% endverbatim %}{% trans 'Yes' %}{% verbatim %}" 
                  data-off-text="{% endverbatim %}{% trans 'No' %}{% verbatim %}"
                  class="modal_field_data" name="is_admin" id="id_admin"{{# if is_admin }} checked{{/ if }}>
            </div>
        </div>
      </div>
      {{# if needs_password }}
      <div class="form-group">
        <label for="id_password" class="col-sm-2 control-label">{{ password_label }}</label>
        <div class="col-sm-10">
          <input name="password" value="{{ password }}" type="password" id="id_password" class="form-control modal_field_data" 
                 placeholder="{% endverbatim %}{% trans 'Password' %}{% verbatim %}">
        </div>
      </div>
      {{/ if }}
      
      {{# if id }}
      <div class="form-group">
        <label for="id_password" class="col-sm-2 control-label">{% endverbatim %}{% trans 'Groups' %}{% verbatim %}</label>
        <div class="col-sm-10">
            <select class="selectpicker show-menu-arrow modal_field_data" multiple data-style="btn-default" countSelectedText="{% endverbatim %}{% trans '{0} of {1} selected' %}{% verbatim %}" 
                    data-selected-text-format="count>3" data-width="100%" name="groups" id="id_groups">
                {{#each groups_all }}
                <option value="{{ id }}"{{# ifbelongs id ../groups }} selected{{/ ifbelongs }}>{{ name }}</option>
                {{/each}}
            </select>
        </div>
    </div>
    {{ else }}
    {{# if external }}
    {{ else }}
      <div class="form-group">
        <label for="id_password" class="col-sm-2 control-label">{% endverbatim %}{% trans 'Groups' %}{% verbatim %}</label>
        <div class="col-sm-10">
            <select class="selectpicker show-menu-arrow modal_field_data" multiple data-style="btn-default" countSelectedText="{% endverbatim %}{% trans '{0} of {1} selected' %}{% verbatim %}" 
                    data-selected-text-format="count>3" data-width="100%" name="groups" id="id_groups">
                {{#each groups_all }}
                <option value="{{ id }}"{{# ifbelongs id ../groups }}selected{{/ ifbelongs }}>{{ name }}</option>
                {{/each}}
            </select>
        </div>
    </div>
    {{/ if }}
    {{/ if }}
</form>
{% endverbatim %}